<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!-- Mon style -->
    <link rel="stylesheet" href="static/css/platform.css" media="screen" title="no title" charset="utf-8">

    <script src="static/js/jquery-3.2.1.js" charset="utf-8"></script>

    <title></title>
  </head>
  <body>
    <form id="formName" action="chooseGame" method="get" target="_self">
      <br>
      <br>
      <br>
      <input type="text" id="playerNameInput" class="form-control input-lg" placeholder="Entrez votre nom">
      <br>
      <br>
      <br>
      <br>
      <button type="submit"  id="validFormName">
        <img src="/static/img/ok.png" alt="Valid form">
      </button>
    </form>

    <!-- <div style="padding-top:2em">
          <a id="changeName" href="chooseGame" target="_self"><img src="/static/img/ok.png" alt="" /></a>
    </div> -->

  </body>
  <script type="text/javascript">
    // On accede à l'objet player en cours grace à : window.parent.player
    var player = window.parent.player;

    jQuery('#formName').submit(function () {
      //Get player name
      var playerName = jQuery('#playerNameInput').val();

      //Send name to server
      if(!player.name){
        player.socket.emit('newName', playerName);
      }else{
        var oldName = player.name;
        player.socket.emit('changeName', {old:oldName , new:playerName });
      }

      //Save locally
      player.name = playerName.toString();

      window.parent.nameChanged(player.name );

    });

  </script>
</html>
